set shell sh
set shellopts '-eu'

set ifs "\n"
set ignorecase
set incsearch
set color256
set hidden
set ratios 2:3
set number
set relativenumber
set previewer /usr/bin/bat
set scrolloff 10
set icons
:reload

map <enter> shell

map x $$f

map e $$EDITOR $f
map E $sudo $EDITOR $f

map o $mimeopen $f
map O $mimeopen -a $f

map c
map cd push $mkdir<space>
map cf push $$EDITOR<space>
map ce push $touch<space>
map cm chmod

map D :delete
map w
map sw :set_wallpaper

map gC cd ~/.config/
map gdc cd ~/Documents
map gdw cd ~/Downloads
map gcl cd ~/.config/lf
map gcb cd ~/.config/bspwm/
map gcs cd ~/.config/sxhkd/
map gcz cd ~/.config/zsh/
map gcd cd ~/.config/dotfiles/
map gcp cd ~/.config/polybar/
map gcn cd ~/.config/nvim
map gus cd /usr/share
map gul cd /usr/local
map gub cd /usr/bin
map gvl cd /var/log
map gs cd ~/Documents/scripts
map gb cd /bin/
map ge cd /etc/
map gp cd ~/Pictures
map gU cd /usr/
map gV cd /var/
map gm cd /mnt

map git $lazygit

cmd open $$OPENER $f

cmd chmod %{{
    set -f
    ls -l --color=never $f | awk '{print $9,"("$1"):"}'
    read mod
    chmod "$mod" $f
    lf -remote 'send reload'
}}

cmd trash %trash -- $fx

cmd set_wallpaper &{{
    set -f
    if rg --quiet -i "[/\w.-_ ]+\.(png|jpg|jpeg|bmp)" <<< $f; then
        sed -i -r "s#'[^']+'#'$f'#" ~/.fehbg
        source ~/.fehbg
    fi
}}

cmd extract ${{
    set -f
    case $f in
        *.tar.bz|*.tar.bz2|*.tbz|*.tbz2) tar xjvf $f;;
        *.tar.gz|*.tgz) tar xzvf $f;;
        *.tar.xz|*.txz) tar xJvf $f;;
        *.zip) unzip $f;;
        *.rar) unrar x $f;;
        *.7z) 7z x $f;;
    esac
}}

cmd tar ${{
    set -f
    mkdir $1
    cp -r $fx $1
    tar czf $1.tar.gz $1
    rm -rf $1
}}

cmd zip ${{
    set -f
    mkdir $1
    cp -r $fx $1
    zip -r $1.zip $1
    rm -rf $1
}}

