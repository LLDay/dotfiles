set shell sh
set shellopts '-eu'

set ifs "\n"
set ignorecase
set incsearch
set color256
set hidden
set ratios 1:3
set number
set relativenumber
set previewer /usr/bin/bat
set scrolloff 10
:reload

map <enter> shell

map x $$f
map X !$f

map e $$EDITOR $f
map E $sudo $EDITOR $f

map o &mimeopen $f
map O $mimeopen -a $f

map c
map cd push $mkdir<space>
map cf push $$EDITOR<space>

map D :delete

map gC cd ~/.config/
map gdc cd ~/Documents
map gdw cd ~/Downloads
map gcl cd ~/.config/lf
map gcb cd ~/.config/bspwm/
map gcs cd ~/.config/sxhkd/
map gcz cd ~/.config/zsh/
map gcd cd ~/.config/dotfiles/
map gcp cd ~/.config/polybar/
map gcn cd ~/.config/nvim
map gus cd /usr/share
map gul cd /usr/local
map gub cd /usr/bin
map gvl cd /var/log
map gs cd ~/Documents/scripts
map gb cd /bin/
map ge cd /etc/
map gU cd /usr/
map gV cd /var/
map gm cd /mnt

# define a custom 'rename' command without prompt for overwrite
# cmd rename %[ -e $1 ] && printf "file exists" || mv $f $1
# map r push :rename<space>

# make sure trash folder exists
# %mkdir -p ~/.trash


# define a custom 'delete' command
# cmd delete ${{
#     set -f
#     printf "$fx\n"
#     printf "delete?[y/n]"
#     read ans
#     [ $ans = "y" ] && rm -rf $fx
# }}

cmd trash %trash -- $fx

# use '<delete>' key for either 'trash' or 'delete' command
# map <delete> trash
# map <delete> delete

# extract the current file with the right command
# (xkcd link: https://xkcd.com/1168/)
cmd extract ${{
    set -f
    case $f in
        *.tar.bz|*.tar.bz2|*.tbz|*.tbz2) tar xjvf $f;;
        *.tar.gz|*.tgz) tar xzvf $f;;
        *.tar.xz|*.txz) tar xJvf $f;;
        *.zip) unzip $f;;
        *.rar) unrar x $f;;
        *.7z) 7z x $f;;
    esac
}}

# compress current file or selected files with tar and gunzip
cmd tar ${{
    set -f
    mkdir $1
    cp -r $fx $1
    tar czf $1.tar.gz $1
    rm -rf $1
}}

# compress current file or selected files with zip
cmd zip ${{
    set -f
    mkdir $1
    cp -r $fx $1
    zip -r $1.zip $1
    rm -rf $1
}}

